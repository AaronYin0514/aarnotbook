# 协方差矩阵

## 方差和协方差的定义

### 方差

在统计学中，**方差**是用来度量**单个随机变量**的**离散程度**，**方差**的计算公式为

$$
\sigma_x^2 = \frac{1}{n-1}\sum_{i=1}^n(x_i-\bar{x})^2
$$  

其中， $n$表示样本量，符号$\bar{x}$表示观测样本的均值，这个定义在初中阶段就已经开始接触了。

### 协方差

协方差则一般用来刻画**两个随机变量**的**相似程度**，**协方差**的计算公式被定义为

$$
\sigma(x,y) = \frac{1}{n-1}\sum_{i=1}^n(x_i-\bar{x})(y_i-\bar{y})
$$

在公式中，符号$\bar{x},\bar{y}$ 分别表示两个随机变量所对应的观测样本均值，据此，我们发现：方差$\sigma_x^2$ 可视作随机变量$x$关于其自身的协方差 $\sigma(x,x)$.

## 从方差/协方差到协方差矩阵

根据方差的定义，给定$d$个随机变量$x_k, k=1,2,\dots,d$，则这些**随机变量的方差**为

$$
\sigma(x_k,x_k) = \frac{1}{n-1}\sum_{i=1}^n(x_{ki}-\bar{x}_k)^2, k=1,2,\dots,d
$$

其中，为方便书写， $x_{ki}$表示随机变量$x_{k}$中的第$i$个观测样本，$n$表示样本量，每个随机变量所对应的观测样本数量均为$n$。

对于这些随机变量，我们还可以根据协方差的定义，求出**两两之间的协方差**，即

$$
\sigma(x_m,x_k) = \frac{1}{n-1}\sum_{i=1}^n(x_{mi}-\bar{x}_m)(y_{ki}-\bar{y}_k)
$$

因此，**协方差矩阵**为


$$
\varSigma = 

\begin{bmatrix}

\sigma(x_1,x_1) & \cdots & \sigma(x_1,x_d) \\
\vdots & \ddots & \vdots \\
\sigma(x_d,x_1) & \cdots & \sigma(x_d,x_d)

\end{bmatrix}

\in \mathbb{R}^{d \times d}
$$

其中，对角线上的元素为各个随机变量的方差，非对角线上的元素为两两随机变量之间的协方差，根据协方差的定义，我们可以认定：矩阵$\varSigma$为**对称矩阵**(symmetric matrix)，其大小为$d \times d$。

## 参考资料

- [如何直观地理解「协方差矩阵」？](https://zhuanlan.zhihu.com/p/37609917)
- [协方差矩阵和散布矩阵（散度矩阵）的意义](https://blog.csdn.net/guyuealian/article/details/68922981)
