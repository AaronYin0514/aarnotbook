---
tags: nodejs egg
---

# 接口访问限制

```js
// app/middleware/ratelimit.js
module.exports = require('koa-ratelimit')
```

```js
// config/config.default.js

config.middleware = [  'ratelimit' ]

config.ratelimit = {
	db: new Redis(),
	duration: 60000,
	errorMessage: '您访问的频率太高了，请手下留情！',
	id: (ctx) => ctx.ip,
	headers: {
	  remaining: 'Rate-Limit-Remaining',
	  reset: 'Rate-Limit-Reset',
	  total: 'Rate-Limit-Total'
	},
	max: 5,
	disableHeader: true,
}
```