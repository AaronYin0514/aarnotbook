---
tags: [ruby, base_type]
---
# 基本数据类型

## 数值类型

### 定义一个整数(Integer)变量

```ruby
age = 18
puts age.class # Integer
puts "我的年龄是#{age}"
```

### 定义一个小数(Float)变量

```ruby
pi = 3.14
puts pi.class # Float
puts "圆周率是#{pi}"
```

## 布尔类型

### 定义一个布尔()变量

```ruby
isActivated = true
puts isActivated ? "己激活" : "未激活"
puts isActivated.class # TrueClass

isEnabled = false
puts isEnabled ? "可用的" : "不可用的"
puts isEnabled.class # FalseClass
```

## 字符串类型

### 创建字符串变量

```ruby
name = "漩涡鸣人"
puts "我的名字叫#{name}"
puts name.class # String
```

### 内嵌表达式

```ruby
name = "漩涡鸣人"
age = 18
log = "我的名字叫#{name}，我的年龄是#{age}"
puts log # 的名字叫漩涡鸣人，我的年龄是18
```

字符串#{}中的ruby表达式会被执行，并将结果内嵌到字符串中。

### 双引号和单引号

```ruby
name = "漩涡鸣人"

log = "我的名字叫#{name}"
puts log # 我的名字叫漩涡鸣人

log = '我的名字叫#{name}'
puts log # 的名字叫#{name}
```

* 用双引号创建的字符串中的特殊字符和内嵌表达式会被转义
* 用单引号创建的字符串中的特殊字符和内嵌表达式不会被转义

### %Q 与 %q

字符串本身包含双引号或单引号时：

```ruby
log = "我的名字叫\"漩涡鸣人\""
puts log # 我的名字叫"漩涡鸣人"
```

使用`%Q`相当于用`" "`创建字符串，使用`%q`则相当于用`' '`创建字符串。

```ruby
name = "漩涡鸣人"
log = %Q{我的名字叫"#{name}"}
puts log # 我的名字叫"漩涡鸣人"

log = %q{我的名字叫'#{name}'}
puts log # 我的名字叫"漩涡鸣人"
```

## 数组

### 创建数组

#### 1 字面量

```ruby
languages = ["Ruby", "Python", "Perl"]
puts languages
puts languages.class
```

#### 2 Array.new

```ruby
a = Array.new
p a #=> []
a = Array.new(5)
p a #=> [nil, nil, nil, nil, nil]
a = Array.new(5, 0)
p a #=> [0, 0, 0, 0, 0]
```

#### 3 使用`%w`与`%i`

```ruby
languages = %w(Ruby Python Perl)
p languages # ["Ruby", "Python", "Perl"]
```

> 在本例中，创建数组时使用了`()`将数组元素括了起来，但可以使用任意字符。
> 虽然**Ruby**允许我们使用任意字符，但建议使用 ()、<>、||。

```ruby
languages = %i(Ruby Python Perl)
p languages # [:Ruby, :Python, :Perl]
```

使用`%i`创建Symbol数组。

### 访问数组

通过数组下标访问数组元素

```ruby
languages = %i(Ruby Python Perl)
p languages[0] # :Ruby
```

## 散列类

### 创建

### 1 字面量

**{ 键 => 值}**方式

```ruby
naruto = {
  "name" => "漩涡鸣人",
  "age" => 18
}
p naruto # {"name"=>"漩涡鸣人", "age"=>18}
p naruto.class # Hash
```

**{ 键: 值}**方式

```ruby
naruto = {
  a: "漩涡鸣人",
  age: 18
}
p naruto # {:a=>"漩涡鸣人", :age=>18}
```

### 2 Hash.new

> Hash.new 是用来创建新的散列的方法。
>
> 若指定参数，则该参数值为散列的默认值，也就是指定不存在的键时所返回的值。
>
> 没指定参数时，散列的默认值为 nil。

```ruby
h1 = Hash.new
h2 = Hash.new("")
p h1["not_key"] #=> nil
p h2["not_key"] #=> ""
```

### 访问

```ruby
naruto = {
  name: "漩涡鸣人",
  age: 18
}
p naruto[:name] # "漩涡鸣人"
p naruto[:age] # 18
p naruto[:power] # nil
```

## Range

### 创建

#### 范围运算符

```ruby
range = 1..5 # 表示1到5，包含5
range1 = 1...5 # 表示1到4，不包含5
```

#### 创建对象

```ruby
range = Range.new(1, 5) # 表示1到5
range1 = Range.new(1, 5, true) # 表示1到4，不包含5
```

### 遍历range

```ruby
sum = 0
for i in 1..5
  sum += i
end
p sum # 15
```

### 转数组

```ruby
arr = (1..5).to_a
p arr # [1, 2, 3, 4, 5]
```

## 类型转换

### 整数 <=> 小数

整数转小数

```ruby
age = 1
p age # 1
p age.class # Integer

age = age.to_f
p age # 1.0
p age.class # Float
```

小数转整数

```ruby
age = 1.8
p age # 1.8
p age.class # Float

age = age.to_i
p age # 1
p age.class # Integer
```

### 字符串 <=> 数值

数值转字符串

```ruby
age = 1.8
p age # 1.8
p age.class # Float

age = age.to_s
p age # "1.8"
p age.class # String
```

字符串转数值

```ruby
ageStr = "1.8"

age = ageStr.to_f
p age # 1.8
p age.class # Float
age = ageStr.to_i
p age # 1
p age.class # Integer
```

### 任意类型 -> 字符串

```ruby
p nil.to_s # ""
p 100.to_s # "100"
p 3.14.to_s # "3.14"
p 'hello world'.to_s # "hello world"
p [].to_s # "[]"
p ({}).to_s # "{}"
```