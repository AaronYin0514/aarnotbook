---
tags: [ruby, number]
---
# 数值

## 数值的字面量

| 字面量 | 作用（括号内为 10 进制的值） |
| --- | --- |
| 123 | 表示10 进制整数 |
| 0123 | 表示8 进制整数（83） |
| 0o123 | 表示8 进制整数（83） |
| 0d123 | 表示10 进制整数（123） |
| 0x123 | 表示16 进制整数（291） |
| 0b1111011 | 表示2 进制整数（123） |
| 123.45 | 浮点小数 |
| 1.23e4 | 浮点小数的指数表示法（1.23×10 的4 次幂=12300.0） |
| 1.23e-4 | 浮点小数的指数表示法（1.23×10 的-4 次幂=0.000123） |

## 运算

### 算数运算

| 运算符 | 运算 |
| --- | --- |
| + | 加法运算 |
| - | 减法运算 |
| * | 乘法运算 |
| / | 除法运算 |
| % | 取余运算 |
| ** | 乘方运算 |

```ruby
p 5 ** -2.0    #=> 0.04
p 5 ** -2      #=> (1/25)
```

### 复合运算

| 运算符 | 描述 | 实例 |
| ---- | ---- | ---- |
| += | 加法赋值运算符 | c += a 等效于 c = c + a |
| -= | 减法赋值运算符 | c -= a 等效于 c = c - a |
| *= | 乘法赋值运算符 | c *= a 等效于 c = c * a |
| /= | 除法赋值运算符 | c /= a 等效于 c = c / a |
| %= | 取模赋值运算符 | c %= a 等效于 c = c % a |
| **= | 幂赋值运算符 | c **= a 等效于 c = c ** a |

### 比较(即关系)运算符

| 运算符 | 描述 |
| ---- | ---- |
| == | 	值是否相等 |
| != | 	值是否不相等 |
| > | 	大于 |
| < | 	小于 |
| >= | 	大于等于 |
| <= | 	小于等于 |

### 逻辑运算符

| 运算符 | 描述 |
| ---- | ---- |
| && and | 并且 |
| || or | 	或 |
| ! not | 非 |

* 表达式的执行顺序是从左到右
* 如果逻辑表达式的真假已经可以确定，则不会再判断剩余的表达式
* 最后一个执行表达式的值为整体逻辑表达式的值

```ruby
a = nil
name = a || "孙悟空"
p name
```

### 位运算

| 运算符 | 运算 |
| --- | --- |
| ~ | 按位取反（一元运算符） |
| & | 按位与 |
| \| | 按位或 |
| ^ | 按位异或 ((a&~b|~a&b)) |
| >> | 位右移 |
| << | 位左移 |

## 常用函数

### 随机数

`Random.rand`方法得到随机数。不指定参数时，`Random.rand`方法返回比`1`小的浮点小数。参数为正整数时，返回`0`到该正整数之间的数值。

```ruby
p Random.rand        
p Random.rand(100)   
p Random.rand(100)
```

### 计数

#### `times`

```ruby
n.times{|i| … }
```

循环**n**次，从**0**到**n-1**的值会被依次赋值给块变量。

```ruby
ary = []
10.times do |i|
  ary << i
end
p ary    #=> [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
```

#### `upto`

```ruby
from.upto(to){|i| … }
```

从**from**开始循环对**i**进行加**1**处理，直到**i**等于**to**。**from**比**to**大时不会执行循环处理。

```ruby
ary = []
2.upto(10) do |i|
  ary << i
end
p ary    #=> [2, 3, 4, 5, 6, 7, 8, 9, 10]
```

#### `downto`

```ruby
from.downto(to){…}
```

从**from**开始循环对 **i** 进行减 **1** 处理，直到 **i** 等于 **to**。**from** 比 **to** 小时不会执行循环处理。

```ruby
ary = []
10.downto(2) do |i|
  ary << i
end
p ary    #=> [10, 9, 8, 7, 6, 5, 4, 3, 2]
```

#### `step`

```ruby
from.step(to, step){…}
```

从 **from** 开始循环对 **i** 进行加 **step** 处理，直到 **i** 等于 **to**。**step** 为正数时，**from** 比 **to** 大时不会执行循环处理。**step** 为负数时，**from** 比 **to** 小时不会执行循环处理。

```ruby
ary = []
2.step(10, 3) do |i|
  ary << i
end
p ary    #=> [2, 5, 8]
　
ary = []
10.step(2, -3) do |i|
  ary << i
end
p ary    #=> [10, 7, 4]
```





